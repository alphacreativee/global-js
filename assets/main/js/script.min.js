let sampleData={features:[{properties:{name:"United Kingdom",latitude:55.3781,longitude:-3.436,pop_max:6733e4,region:"uk"}},{properties:{name:"Spain",latitude:40.4637,longitude:-3.7492,pop_max:4736e4,region:"spain"}},{properties:{name:"Saudi Arabia",latitude:24.7136,longitude:46.6753,pop_max:3481e4,region:"ksa"}},{properties:{name:"USA - Florida",latitude:27.9944,longitude:-81.7603,pop_max:2154e4,region:"usa-florida"}},{properties:{name:"VietNam",latitude:14.0583,longitude:108.2772,pop_max:9747e4,region:"vietnam"}}]},globe,allPlaces=sampleData;function updateRegionCounts(e){let i={uk:e.features.filter(e=>"uk"===e.properties.region).length,spain:e.features.filter(e=>"spain"===e.properties.region).length,ksa:e.features.filter(e=>"ksa"===e.properties.region).length,"usa-florida":e.features.filter(e=>"usa-florida"===e.properties.region).length,vietnam:e.features.filter(e=>"vietnam"===e.properties.region).length};Object.keys(i).forEach(e=>{var t=document.getElementById("count-"+e);t&&(t.textContent=`(${i[e]})`)})}function moveToRegion(t){var e,i;globe?(e=allPlaces.features.filter(e=>e.properties.region===t),console.log("Moving to region:",t,e),0===e.length?console.warn("No regions found for:",t):({latitude:e,longitude:i}=e[0].properties,console.log("Moving to coordinates:",{lat:e,lng:i,altitude:2.5}),globe.pointOfView({lat:e,lng:i,altitude:2.5},2e3))):console.error("Globe is not initialized")}function resetView(){globe?(["filter-uk","filter-spain","filter-ksa","filter-usa-florida","filter-vietnam"].forEach(e=>{document.getElementById(e).checked=!1}),globe.pointOfView({lat:0,lng:0,altitude:2.5},2e3)):console.error("Globe is not initialized")}function handleRegionChange(t,e){document.getElementById(t).checked?(["filter-uk","filter-spain","filter-ksa","filter-usa-florida","filter-vietnam"].forEach(e=>{e!==t&&(document.getElementById(e).checked=!1)}),moveToRegion(e)):resetView()}function initGlobe(e){console.log("Initializing Globe with Places:",e.features);var t=document.getElementById("globeViz");console.log("Globe Container Size:",t.getBoundingClientRect()),t&&0!==t.getBoundingClientRect().width&&0!==t.getBoundingClientRect().height?(globe=Globe()(t).globeImageUrl("//cdn.jsdelivr.net/npm/three-globe/example/img/earth-night.jpg").backgroundImageUrl("//cdn.jsdelivr.net/npm/three-globe/example/img/night-sky.png").atmosphereColor("white").htmlElementsData(e.features).htmlLat(e=>e.properties.latitude).htmlLng(e=>e.properties.longitude).htmlElement(e=>{var t=document.createElement("div");t.innerHTML=`
              <div style="
                background: #00ffff;
                color: #000;
                padding: 4px 12px;
                font-family: 'Poppins', sans-serif;
                font-size: 12px;
                font-weight: 400;
                white-space: nowrap;
                box-shadow: 0 2px 8px rgba(0, 255, 255, 0.3);
                border: 1px solid rgba(255, 255, 255, 0.2);
                backdrop-filter: blur(4px);   
                clip-path: polygon(0px 0px, 100% 0px, 100% 100%, 10px 100%, 0px 20px);     
                text-align: center;
                cursor: pointer;
                transition: all 0.3s ease;
              ">${e.properties.name}</div>
            `;let i=t.firstElementChild;return i.addEventListener("mouseenter",()=>{i.style.transform="scale(1.1)",i.style.boxShadow="0 4px 16px rgba(0, 255, 255, 0.5)"}),i.addEventListener("mouseleave",()=>{i.style.transform="scale(1)",i.style.boxShadow="0 2px 8px rgba(0, 255, 255, 0.3)"}),t}).htmlAltitude(()=>.02))?(setupFilterEventListeners(),updateRegionCounts(e)):console.error("Failed to initialize Globe"):console.error("Globe container has zero size or is not found")}function setupFilterEventListeners(){[{id:"filter-uk",region:"uk"},{id:"filter-spain",region:"spain"},{id:"filter-ksa",region:"ksa"},{id:"filter-usa-florida",region:"usa-florida"},{id:"filter-vietnam",region:"vietnam"}].forEach(({id:e,region:t})=>{document.getElementById(e).addEventListener("change",function(){console.log(e+" changed:",this.checked),handleRegionChange(e,t)})})}document.addEventListener("DOMContentLoaded",()=>{updateRegionCounts(sampleData),initGlobe(sampleData),setTimeout(()=>{globe&&moveToRegion("uk")},1e3)});